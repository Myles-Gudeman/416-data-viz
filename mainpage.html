<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Color scale -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Add 2 buttons -->
<button onclick="update(Overview)">Overview</button>
<button onclick="update(Millenials)">Millenials</button>
<button onclick="update(Genx)">Generation X</button>
<button onclick="update(BB)">Baby Boomers</button>
<button onclick="update(Trad)">Traditionalists</button>


<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>

<body>

<h1>Why can't Millenials afford to buy a house?</h1>

<p>A common claim these days is that due to aggressive real estate investing from older generations, Millenials are now priced out of the housing market and cannot afford to purchase. This locks them into a permanent renting situation in which wealth is consistently siphoned out of our generation and into older generations who now own these properties. While there has been a distinct increase in sentiment towards real estate as a form of investment which causes a housing market price increase, many people within such generations claim that the reason millenials can't afford housing is their spending habits. This journey aims to analyze generational spending habits and compare the differences in 'frivilous' spending vs. spending necessary in todays society. </p>

<h2>Instructions:</h2>

<p>Type Here. Type Here. Type Here. Type Here. Type Here. Type Here. 
</p>


</body>

<script>

// set the dimensions and margins of the graph
var width = 450
    height = 450
    margin = 40

// The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
var radius = Math.min(width, height) / 2 - margin

// append the svg object to the div called 'my_dataviz'
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

// a = restuarants, b = groceries, c = gas, d = pharmacies, e = furniture/building, f = elec/hobbies/clothing, g = general/misc
var Overview 	= {a: 17.0, b: 26.2, c:8.9, d:4.0, e:7.8, f:15.5, g:20.7}
var Millenials  = {a: 23.8, b: 21.7, c:10.8, d:3.0, e:4.5, f:18.5, g:17.7}
var Genx 		= {a: 17.7, b: 25.3, c:9.7, d:2.9, e:7.3, f:16.8, g:20.3}
var BB 			= {a: 13.5, b: 27.2, c:8.5, d:3.7, e:10.0, f:14.7, g:22.3}
var Trad 		= {a: 12.8, b: 30.4, c:6.7, d:6.4, e:9.4, f:11.8, g:22.5}

// set the color scale
var color = d3.scaleOrdinal()
  .domain(["a", "b", "c", "d", "e", "f"])
  .range(d3.schemeDark2);

// A function that create / update the plot for a given variable:
function update(data) {

  // Compute the position of each group on the pie:
  var pie = d3.pie()
    .value(function(d) {return d.value; })
    .sort(function(a, b) { console.log(a) ; return d3.ascending(a.key, b.key);} ) // This make sure that group order remains the same in the pie chart
  var data_ready = pie(d3.entries(data))
  
  //-----------
  var arcGenerator = d3.arc()
  .innerRadius(0)
  .outerRadius(radius)
  
  
  // map to data
  var u = svg.selectAll("path")
    .data(data_ready)

  // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
  u
    .enter()
    .append('path')
    .merge(u)
    .transition()
    .duration(1000)
    .attr('d', d3.arc()
      .innerRadius(0)
      .outerRadius(radius)
    )
    .attr('fill', function(d){ return(color(d.data.key)) })
    .attr("stroke", "white")
    .style("stroke-width", "2px")
    .style("opacity", 1)
    
    
    //------------
    u
    .selectAll('mySlices')
    .data(data_ready)
    .enter()
    .append('text')
    .text(function(d){ return "grp " + d.data.key})
    .attr("transform", function(d) { return "translate(" + arcGenerator.centroid(d) + ")";  })
    .style("text-anchor", "middle")
    .style("font-size", 17)
    
    
  // remove the group that is not present anymore
  u
    .exit()
    .remove()
   
    



}

// Initialize the plot with the first dataset
update(Overview)

</script>
